{% extends "base.html" %}

{% block content %}
<section class="section">
  <div class="generate__header">
    <h1 class="section__title-center">Generate Alternative Content</h1>
    <p class="generate__subtitle">Use AI to create alternative titles or descriptions for your episode</p>
  </div>

  <div class="generate__container container">
    <div class="generate__form-wrapper">
      <form class="generate__form" action="{{ url_for('get_alternative_episode', episode_id=episode_id) }}" method="post" id="generate-form">
        <div class="form__field">
          <label class="form__label">
            <i class="ri-target-line"></i> What to Generate
          </label>
          <div class="form__control">
            <select class="form__select" name="target" required>
              <option value="">Select what to generate...</option>
              <option value="title">Alternative Title</option>
              <option value="description">Alternative Description</option>
            </select>
            <div class="form__help">Choose whether to generate a new title or description</div>
          </div>
        </div>
    
        <div class="form__field">
          <label class="form__label">
            <i class="ri-magic-line"></i> AI Prompt
          </label>
          <div class="form__control">
            <textarea 
              class="form__textarea" 
              name="prompt" 
              placeholder="Describe the style, tone, or approach you want for the alternative content..."
              rows="4"
              required
            ></textarea>
            <div class="form__help">Provide specific instructions for the AI to generate content that matches your vision</div>
          </div>
        </div>
        
        <div class="generate__examples">
          <h3 class="generate__examples-title">Example Prompts:</h3>
          <div class="generate__examples-list">
            <button type="button" class="example__button" onclick="setPrompt('Make it more engaging and clickbait-style')">
              "Make it more engaging and clickbait-style"
            </button>
            <button type="button" class="example__button" onclick="setPrompt('Make it more professional and formal')">
              "Make it more professional and formal"
            </button>
            <button type="button" class="example__button" onclick="setPrompt('Make it shorter and more concise')">
              "Make it shorter and more concise"
            </button>
            <button type="button" class="example__button" onclick="setPrompt('Make it more humorous and casual')">
              "Make it more humorous and casual"
            </button>
          </div>
        </div>
        
        <div class="form__actions">
          <button type="submit" class="button button--primary button--large" id="generate-btn">
            <i class="ri-magic-line"></i> Generate Alternative
          </button>
          <a href="/podcast/episodes/all" class="button button--secondary">
            <i class="ri-arrow-left-line"></i> Back to Episodes
          </a>
        </div>
      </form>
    </div>
  </div>
</section>

<script>
  function setPrompt(prompt) {
    document.querySelector('textarea[name="prompt"]').value = prompt;
  }

  document.getElementById('generate-form').addEventListener('submit', function(e) {
    const generateBtn = document.getElementById('generate-btn');
    const originalText = generateBtn.innerHTML;
    
    // Show loading state
    generateBtn.innerHTML = '<i class="ri-loader-4-line"></i> Generating...';
    generateBtn.disabled = true;
    
    // Add loading class to form
    this.classList.add('form--loading');
  });
</script>
{% endblock %}