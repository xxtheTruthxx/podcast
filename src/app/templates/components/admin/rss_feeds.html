{% extends "base.html" %}

{% block content %}
<section class="section admin__section">
  <div class="container">
    <header class="admin__header">
      <div>
        <h1 class="admin__title">
          <i class="ri-rss-line"></i>
          RSS Feeds
        </h1>
        <p class="admin__subtitle">{{ total_count }} feeds available</p>
      </div>
      <a href="/admin/dashboard" class="button button--secondary">
        <i class="ri-arrow-left-line"></i>
        Back to Dashboard
      </a>
    </header>

    {% if error %}
    <div class="admin__error" role="alert">
      <i class="ri-error-warning-line"></i>
      <span>{{ error }}</span>
    </div>
    {% endif %}

    {% if feeds %}
    <div class="admin__rss-grid">
      {% for feed in feeds %}
      <article class="admin__rss-card">
        {% if feed.image_url %}
        <div class="admin__rss-image">
          <img src="{{ feed.image_url }}" alt="{{ feed.title }}" loading="lazy">
        </div>
        {% endif %}
        
        <div class="admin__rss-content">
          <h3 class="admin__rss-title">{{ feed.title }}</h3>
          
          {% if feed.description %}
          <p class="admin__rss-description">
            {% if feed.description|length > 150 %}
              {{ feed.description[:150] }}...
            {% else %}
              {{ feed.description }}
            {% endif %}
          </p>
          {% endif %}
          
          <div class="admin__rss-meta">
            {% if feed.author %}
            <span class="admin__rss-author">
              <i class="ri-user-line"></i>
              {{ feed.author }}
            </span>
            {% endif %}
            {% if feed.date %}
            <time class="admin__rss-date" datetime="{{ feed.date }}">
              <i class="ri-calendar-line"></i>
              {{ feed.date }}
            </time>
            {% endif %}
          </div>
          
          <div class="admin__rss-actions">
            <a href="/rss/feed/{{ feed.uuid }}" class="button button--primary button--small" target="_blank">
              <i class="ri-external-link-line"></i>
              View Feed
            </a>
            {% if feed.origin %}
            <a href="{{ feed.origin }}" class="button button--secondary button--small" target="_blank">
              <i class="ri-link"></i>
              Original
            </a>
            {% endif %}
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
    {% else %}
    <div class="admin__empty">
      <div class="admin__empty-icon">
        <i class="ri-rss-line"></i>
      </div>
      <h2 class="admin__empty-title">No RSS Feeds Available</h2>
      <p class="admin__empty-description">
        {% if error %}
          {{ error }}
        {% else %}
          Unable to fetch RSS feeds at this time. Please check the RSS URL configuration.
        {% endif %}
      </p>
    </div>
    {% endif %}
  </div>
</section>

<style>
.admin__section {
  background: linear-gradient(135deg, var(--first-color-lighten) 0%, rgba(255, 255, 255, 0.8) 100%);
  min-height: 100vh;
}

.admin__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 2.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid rgba(0, 0, 0, 0.05);
  flex-wrap: wrap;
  gap: 1rem;
}

.admin__title {
  font-size: 2rem;
  color: var(--title-color);
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.admin__title i {
  color: var(--first-color);
}

.admin__subtitle {
  color: var(--text-color-light);
  font-size: var(--normal-font-size);
}

.admin__error {
  background: #fee;
  border: 1px solid #fcc;
  color: #c33;
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.admin__error i {
  font-size: 1.25rem;
}

.admin__rss-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 1.5rem;
}

.admin__rss-card {
  background: white;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
  overflow: hidden;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
}

.admin__rss-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}

.admin__rss-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: var(--first-color-lighten);
}

.admin__rss-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.admin__rss-content {
  padding: 1.5rem;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.admin__rss-title {
  font-size: 1.25rem;
  font-weight: var(--font-semi-bold);
  color: var(--title-color);
  margin: 0;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.admin__rss-description {
  color: var(--text-color);
  font-size: var(--normal-font-size);
  line-height: 1.6;
  margin: 0;
  flex: 1;
}

.admin__rss-meta {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding-top: 1rem;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.admin__rss-author,
.admin__rss-date {
  color: var(--text-color-light);
  font-size: var(--small-font-size);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.admin__rss-author i,
.admin__rss-date i {
  color: var(--first-color);
}

.admin__rss-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: auto;
  padding-top: 1rem;
}

.admin__rss-actions .button {
  flex: 1;
}

.button--small {
  padding: 0.5rem 1rem;
  font-size: var(--small-font-size);
}

.admin__empty {
  text-align: center;
  padding: 4rem 2rem;
  background: white;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
}

.admin__empty-icon {
  font-size: 4rem;
  color: var(--first-color-light);
  margin-bottom: 1.5rem;
}

.admin__empty-title {
  font-size: 1.5rem;
  color: var(--title-color);
  margin-bottom: 0.5rem;
}

.admin__empty-description {
  color: var(--text-color-light);
}

@media screen and (max-width: 768px) {
  .admin__rss-grid {
    grid-template-columns: 1fr;
  }

  .admin__header {
    flex-direction: column;
  }
}
</style>
{% endblock %}


